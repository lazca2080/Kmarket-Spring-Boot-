<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.kmarket.dao.CsDAO">
    <select id="selectCss" resultType="kr.co.kmarket.vo.CsVO">
       (select * from km_cs_notice limit 5)
		UNION
		(select * from km_cs_qna limit 5)
    </select>
	
	<select id="selectNtList" resultType="kr.co.kmarket.vo.CsVO">
		SELECT * FROM `km_cs` WHERE `parent`=0 AND `cate`=#{cate} AND `cateType1`= #{cateType1} ORDER BY `no` DESC LIMIT #{start},10;
	</select>
	
	<select id="selectCountTotal" resultType="int">
		select count(`no`) from `km_cs` where `parent`=0 
		<if test="cateType1 != null">	
		and `cateType1` = #{cateType1};
		</if>
	</select>	
	
	<select id="selectCs" resultType="kr.co.kmarket.vo.CsVO">
		SELECT * FROM  `km_cs` WHERE `no`= #{no};
	</select>
	
	<update id="updateArticleHit">
		UPDATE `km_cs` SET `hit`=`hit`+1 WHERE `no`=#{no};
	</update>
	
	<select id="selectFaqArticles" resultType="kr.co.kmarket.vo.CsVO">
		SELECT * FROM `km_cs` WHERE `cateType1`= #{cateType1} ORDER BY `cateType2`, `rdate` DESC;
	</select>
	
	<select id="selectArticles" resultType="kr.co.kmarket.vo.CsVO">
		SELECT * FROM `km_cs_notice` WHERE `parent`=0 
		AND `cateType1`= #{cateType1} 
		ORDER BY `no` DESC LIMIT #{start},10;
	</select>
	
	<insert id="insertArticle">
		insert into `km_cs` set `cate`= 'qna', `cateType1`=#{cateType1}, `cateType2`=#{cateType2},
		`title`=#{title}, `content`=#{content}, `uid`=#{uid}, `regip`=#{regip}, `rdate`=NOW();
	</insert>
	
</mapper>
